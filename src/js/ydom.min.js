(function(){window.y$=(a,b,c)=>{if("string"!=typeof a||""===a)return;let d;if(a.startsWith("#")&&(0<a.indexOf(" ")?d=document.querySelector(a):a=a.substring(1)),d||(d=document.getElementById(a)),!d){const b=document.getElementsByName(a);1===b.length?d=b[0]:0===b.length&&(d=void 0)}if(!d){const b=a.split(" ");let c,e=!0;for(let a,d=0;d<b.length;d++){a=b[d].trim(),a.startsWith(".")&&(a=a.substring(1));const f=getElementsByClassName(document,"*",a);0<f.length&&(e?c=f:(e=!1,c=array_intersect(c||[],f)))}d=c}else if("undefined"!=typeof b&&(c=0+c,d.getElementsByTagName)){const a=d.getElementsByTagName(b);0<a.length&&(d=a[c])}return d}})(),"object"==typeof window&&"undefined"==typeof getElementsByClassName&&(window.getElementsByClassName=function(a,b,c){for(var d,e=a.getElementsByTagName(b),f=[],g=0;g<e.length;g++)d=e[g],d&&"function"==typeof d.hasClass&&d.hasClass(c)&&f.push(d);return null===f&&(f=document.getElementsByClassName(c)),f},window.createDOMEvent=function(a){var b=null;return yDevice.isOnMobile()?(b=document.createEvent("Event"),b.initEvent(a,!0,!0)):b=new Event(a),b});class yDom{static _elem_templates=[];static cfgColors=["#F2F0F0","#CFCFCF"];static suggestRowColor(a){return yDom.cfgColors[a%2]}static getFormElements(a,b,c){b=b||{};var d,e,f,g,h,j,k,l={},m=this.selectElements(a),n=0,o=y$(a);if(o)for(var p=b.elementPrefixName||b.prefix||o.getAttribute("data-prefix")||"",q=b.elementPostixName||b.postfix||o.getAttribute("data-postfix")||"",r=0;r<m.length;r++){m[r].getAttribute?(g=m[r].getAttribute("data-edit-mask")||m[r].getAttribute("editMask"),h=m[r].getAttribute("data-storage-mask")||m[r].getAttribute("storageMask"),j=m[r].getAttribute("data-value-type")||m[r].getAttribute("valueType")||"text"):(g="",h="",j="text"),k=!0,e=m[r].type.toLowerCase(),d=m[r].name||m[r].id;if(d.substr(d.length,-q.length)==q&&d.substr(0,p.length)==p&&(d=d.substr(p.length),d=d.substr(0,d.length-q.length),""<d)){switch(f="",("radio"==e||"checkbox"==e)&&(k=!1,"undefined"==typeof l[d]&&(l[d]="")),e){case"text":case"password":case"textarea":case"email":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"month":case"search":case"tel":case"time":case"url":case"week":f=m[r].value+"",""<g&&""<h&&0<=j.indexOf("date")&&(f=dateTransform(f,g,h),f=f?f+"":"");break;case"number":case"range":f=m[r].value,isNumber(f)&&(f=f.toFloat());break;case"radio":case"checkbox":f=m[r].checked?m[r].value:"",k=""!==f;break;case"select-one":case"select-multi":if(f=m[r].selectedIndex,m[r].options[f]){var s=m[r].parentNode.getAttribute("data-id-fieldname")||"id";f=m[r].options[f].getAttribute(s)||m[r].options[f].value}break;case"file":if(m[r].files[0])if("function"==typeof c){var t=new FileReader;n++,t._fieldName=d,t.addEventListener("load",function(){l[this._fieldName]=this.result,n--,0>=n&&(l.__ready=!0,c(l))}),t.readAsDataURL(m[r].files[0]),k=!1}else f="aOnReady() not present in js call to getFormElements()"}"string"==typeof f&&0<=f.indexOf(",")&&(f=encodeURIComponent(f)),k&&(l[d]=f)}}return"function"==typeof c&&(l.__ready=0==n,c(l)),l}static selectElements(a,b){var c,d,e,f,g=[],h=y$(a);if(h)for(d=h.getElementsByTagName("*"),e=0;e<d.length;e++)d[e].type&&(f=d[e].type.toLowerCase(),c=!1,b&&0>b.indexOf(d[e].name||d[e].id)&&(f="--AVOID--"),"text"===f||"password"===f||"textarea"===f||"hidden"===f||"email"===f||"radio"===f||"checkbox"===f||"select-one"===f||"select-multi"===f||"file"===f?c=!0:"color"===f||"date"===f||"datetime"===f||"datetime-local"===f||"month"===f||"number"===f||"range"===f||"search"===f||"tel"===f||"time"===f||"url"===f||"week"===f?c=!0:void 0,c&&(g[g.length]=d[e]));return g}static cleanElement(a){if("string"==typeof a&&(a=y$(a)),a){var b,c;if(c=a.type?a.type.toLowerCase():a.nodeName?a.nodeName.toLowerCase():"UNKNOWN",b=!1,0>["__cmd5p__"].indexOf(a.id))switch(c){case"text":case"password":case"textarea":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"month":case"number":case"range":case"search":case"tel":case"email":case"time":case"url":case"week":b=""<a.value,a.value="";break;case"radio":case"checkbox":b=!1!==a.checked,a.checked=!1;break;case"select-one":case"select-multi":b=-1<a.selectedIndex,a.selectedIndex=-1;break;case"table":for(0<a.getElementsByTagName("tbody").length&&(a=a.getElementsByTagName("tbody")[0]);0<a.rows.length;)a.deleteRow(a.rows.length-1);break;case"ul":for(;a.firstChild;)a.removeChild(a.firstChild)}}else _dumpy(2,1,"null element when calling cleanElement()")}static cleanForm(a,b){var c,d;for(d=this.selectElements(a,b),c=0;c<d.length;c++)yDom.cleanElement(d[c]);return d}static fillElement(a,b,d,e){(void 0===d||null===d)&&(d={}),"boolean"==typeof e&&(e={deleteRows:e}),e=e||{},"undefined"==typeof e.deleteRows&&(e.deleteRows=!0),"undefined"==typeof e.paintRows&&(e.paintRows=!0),"undefined"==typeof e.insertAtTop&&(e.insertAtTop=!1);var f,g,h,k,l,m=y$(a),n="undefined"==typeof yDom._elem_templates[a];if("undefined"==typeof window._evtFilled&&(window._evtFilled=window.createDOMEvent("filled")),m){f=d.idFieldName||m.getAttribute("data-id-fieldname")||"id",m.setAttribute("data-id-fieldname",f),"boolean"==typeof e.unlearn&&(n=e.unlearn);var o,h,p,q,s=function(a){return a.doc&&a.id&&a.value&&(a=a.doc),a},t=function(a,b){if("undefined"!=typeof d.inplaceData)for(var e=0;e<d.inplaceData.length;e++)if("undefined"!=typeof b[d.inplaceData[e]]){var f=d.inplaceData[e];a.setAttribute("data-"+f,b[f]||"")}},u=function(a,c,g){var i,j=s(b[c]);if(h=0,"TR"==a.nodeName&&e.paintRows&&(a.style.backgroundColor=yDom.suggestRowColor(g)),j[f])if(y$(j[f])){for(i=0;y$(j[f]+"_"+i);)i++;a.id=j[f]+"_"+i}else a.id=j[f];t(a,j),(d.onClick||d.onSelect)&&a.addEventListener("click",d.onClick||d.onSelect,!1)},v=function(b,c){if(b!==f){var e=k.insertCell(h),g=s(c),i=null===b?yMisc.unmaskHTML(g):yMisc.unmaskHTML(g[b]||"");if(d.columns&&d.columns[b]){var j=d.columns[b];j.align&&(e.style.textAlign=j.align),j.type&&(i=yAnalise("%"+j.type+"("+i+")"))}l||e.classList.add("warning"),e.innerHTML=0===i.length?"&nbsp;":i,e.style.verticalAlign="top",e.id=a+"_"+h+"_"+o.rows.length,e.setAttribute("colName",b),"function"==typeof d.onNewItem&&d.onNewItem(a,e,g),h++}},w=new Date().getTime()-1447265735470,x=0;if("TABLE"==m.nodeName){o=m;const c=m.getElementsByTagName("tbody");0<c.length&&(o=c[0]);let g="undefined"!=typeof d.columns||"undefined"!=typeof d.rows||"undefined"!=typeof d.html;if(n)if(yDom._elem_templates[a]={},!g){yDom._elem_templates[a].rows=[];for(let b=0;b<o.rows.length;b++)yDom._elem_templates[a].rows[b]=(o.rows[b].innerHTML.trim()+"").replace(/\s+\ /g,"")}else yDom._elem_templates[a].columns=d.columns,yDom._elem_templates[a].rows=d.rows,yDom._elem_templates[a].html=d.html;if(mergeObject(yDom._elem_templates[a],d,!0),g="undefined"!=typeof d.columns||"undefined"!=typeof d.rows||"undefined"!=typeof d.html,e.deleteRows)for(;0<o.rows.length;)o.deleteRow(o.rows.length-1);else o.rows.length;for(const i in x=o.rows.length%2,h=null,b)if(b.hasOwnProperty(i)){const c=s(b[i]);x++;let j=!0;if(!e.deleteRows&&c[f])for(let a=0;j&&a<o.rows.length;a++)if(o.rows[a].id==c[f]){for(k=o.rows[a];0<k.cells.length;)k.deleteCell(0);j=!1,c.rowid=a}if(j&&(k=e.insertAtTop?o.insertRow(0):o.insertRow(o.rows.length)),w++,c.rowid=e.insertAtTop||"undefined"==typeof k.rowIndex?w+"":k.rowIndex,c._elementid_=a,u(k,i,x),"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,c),!g){if("string"==typeof c)v(null,b[i]);else for(const a in c)c.hasOwnProperty(a)&&a!==f&&"rowid"!==a&&"_elementid_"!==a&&v(a,b[i]);}else if("undefined"!=typeof d.columns){if(Array.isArray(d.columns))for(const a of d.columns)v(a,b[i]);else for(const a in d.columns)d.columns.hasOwnProperty(a)&&v(a,b[i]);}else if("undefined"!=typeof d.html)p=k.insertCell(0),p.innerHTML=yAnalise(d.html,c),p.style.verticalAlign="top",p.id=`${a}_${h}_${o.rows.length}`,"function"==typeof d.onNewItem&&d.onNewItem(a,p,c);else if("undefined"!=typeof d.rows){let b=!0;for(const f of d.rows){if(b||(k=o.insertRow(o.rows.length),u(k,i,x)),k.innerHTML=yAnalise(f,c),!j&&e.deleteRows)for(const a of k.cells)a.style.borderLeft="solid 1px red";"function"==typeof d.onNewItem&&d.onNewItem(a,k,c),b=!1}}"function"==typeof d.onNewRowReady&&d.onNewRowReady(a,k)}m.dispatchEvent(window._evtFilled)}else if("UL"==m.nodeName){var y=m;for(var z in n&&(d.columns||d.rows||d.html?yDom._elem_templates[a]={columns:d.columns,rows:d.rows,html:d.html}:0<m.children.length&&(yDom._elem_templates[a]={},yDom._elem_templates[a].rows=Array.from(m.children).map(a=>a.outerHTML))),mergeObject(yDom._elem_templates[a],d,!0),e.deleteRows&&(y.innerHTML=""),b)if(b.hasOwnProperty(z)){var q=s(b[z]);"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,q);var A=document.createElement("li");t(A,q);var B="",C=!1;if(Array.isArray(d.rows)){for(var D=0;D<d.rows.length;D++)B+=yAnalise(d.rows[D],q)+"";C=!0}else if("string"==typeof d.html)B=yAnalise(d.html,q)+"",C=!0;else for(var g in q)""===B&&q.hasOwnProperty(g)&&g!==f&&"rowid"!==g&&"_elementid_"!==g&&(B+=q[g]||"");if(u(A,z,0),C?A.innerHTML=B:A.appendChild(document.createTextNode(B)),"string"==typeof d.beforeElement){var c=y$(d.beforeElement);y.insertBefore(A,c)}else y.appendChild(A);"function"==typeof d.onNewItem&&d.onNewItem(a,A,q)}m.dispatchEvent(window._evtFilled)}else if("LISTBOX"==m.nodeName){const c=m;if(n)if("undefined"!=typeof d.columns||"undefined"!=typeof d.rows||"undefined"!=typeof d.html)yDom._elem_templates[a]={},yDom._elem_templates[a].columns=d.columns,yDom._elem_templates[a].rows=d.rows,yDom._elem_templates[a].html=d.html;else if(yDom._elem_templates[a]={},0<c.options.length){yDom._elem_templates[a].rows=[];for(let b=0;b<c.options.length;b++)yDom._elem_templates[a].rows[b]=(c.options[b].innerHTML.trim()+"").replace(/\s+/g,"")}if(mergeObject(yDom._elem_templates[a],d,!0),e.deleteRows)for(;0<c.childElementCount;)c.childNodes[0].remove();let g=0;for(const e in b)if(b.hasOwnProperty(e)){const h=s(b[e]);h._elementid_=a,"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,h);const i=document.createElement("listitem");let j=0;if("undefined"!=typeof d.columns){for(const b in d.columns)if(b!==f){const c=document.createElement("listcell");c.innerHTML=h[b]||"",c.id=`${a}_${j}_${g}`,"function"==typeof d.onNewItem&&d.onNewItem(a,c,h),j++,i.appendChild(c)}}else if("string"==typeof h)_dumpy(2,1,"ERRO: yeapf-dom.js - string cell not implemented");else for(const b in h)if(h.hasOwnProperty(b)&&b!==f&&"rowid"!==b&&"_elementid_"!==b){const c=document.createElement("listcell");c.innerHTML=h[b]||"",c.id=`${a}_${j}_${g}`,"function"==typeof d.onNewItem&&d.onNewItem(a,c,h),j++,i.appendChild(c)}t(i,h),c.appendChild(i),g++}m.dispatchEvent(window._evtFilled)}else if("SELECT"==m.nodeName||"DATALIST"==m.nodeName){if(n)if("undefined"!=typeof d.columns||"undefined"!=typeof d.rows||"undefined"!=typeof d.html)yDom._elem_templates[a]={},yDom._elem_templates[a].columns=d.columns,yDom._elem_templates[a].rows=d.rows,yDom._elem_templates[a].html=d.html;else if(yDom._elem_templates[a]={},1<m.options.length){yDom._elem_templates[a].rows=[];for(let b=0;b<m.options.length;b++)yDom._elem_templates[a].rows[b]=(m.options[b].innerHTML.trim()+"").replace(/\s+/g,"")}else 1===m.options.length&&(yDom._elem_templates[a].html=(m.options[0].outerHTML.trim()+"").replace(/\s+/g,""));if(mergeObject(yDom._elem_templates[a],d,!0),e.deleteRows)for(;0<m.options.length;)m.removeChild(m.options[0]);let c=0;for(const e in b)if(b.hasOwnProperty(e)){const g=s(b[e]);g._elementid_=a,"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,g);let h="";if("undefined"!=typeof d.html)h=yAnalise(d.html,g);else if("undefined"!=typeof d.columns){const a=d.sep||"";if(Array.isArray(d.columns))for(const b of d.columns)""!==h&&(h+=a),h+=g[b]||"";else if("string"==typeof g)_dumpy(2,1,"ERRO: yeapf-dom.js - string cell not implemented");else for(const b in d.columns)b!==f&&(h+=(g[b]||"")+a)}else for(const a in g)g.hasOwnProperty(a)&&a!==f&&"rowid"!==a&&"_elementid_"!==a&&(h+=g[a]||"");const i=document.createElement("option");"undefined"!=typeof g[f]&&("DATALIST"===m.nodeName?i.setAttribute("data-"+f,g[f]):i.value=g[f]),"undefined"==typeof d.html&&(i.innerHTML=h),i.id=`${a}_${c}`,t(i,g),"function"==typeof d.onNewItem&&d.onNewItem(a,i,g),m.appendChild(i),"undefined"!=typeof d.html&&(i.outerHTML=h),c++}m.dispatchEvent(window._evtFilled),m.onclick&&m.onclick()}else if("FORM"==m.nodeName){var i=function(a,b){return b=b.toUpperCase(),a.className.toUpperCase().includes(b)},j=function(a,b){const c=a.type.toLowerCase();switch(c){case"tel":a.value=(b+"").asPhone();break;case"text":case"password":case"textarea":case"email":case"hidden":case"color":case"date":case"datetime":case"datetime-local":case"month":case"number":case"range":case"search":case"time":case"url":case"week":a.value=b;break;case"radio":case"checkbox":a.checked=a.value===b;break;case"select-one":case"select-multi":for(let c=0;c<a.options.length;c++)if(a.options[c].value===b){a.selectedIndex=c;break}}i(a,"cpf")&&(a.value=(b+"").asCPF()),i(a,"cnpj")&&(a.value=(b+"").asCNPJ()),i(a,"rg")&&(a.value=(b+"").asRG()),i(a,"cep")&&(a.value=(b+"").asCEP())};let c;if(c=e.deleteRows?this.cleanForm(a):this.selectElements(a),b){const e=Array.isArray(b)?b:[b],f=s(e[0]);t(m,f),"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,f);const g=d.elementPrefixName||d.prefix||m.getAttribute("data-prefix")||"",h=d.elementPostixName||d.postfix||m.getAttribute("data-postfix")||"";for(let b=0;b<c.length;b++){const e=c[b],i=suggestKeyName(f,e.name||e.id,g,h),k=d.columns&&suggestKeyName(d.columns,e.name||e.id)||null;if("undefined"!=typeof f[i]){const b=yMisc.unmaskHTML(f[i]),c=e.getAttribute("data-value-type")||e.getAttribute("valueType")||"text";(!d.columns||""<k)&&(""<k&&!Array.isArray(d.columns)&&(c=d.columns[k].type,editMask=d.columns[k].editMask||editMask,storageMask=d.columns[k].storageMask||storageMask),"text"!==c&&(editMask&&storageMask?c.includes("date")&&(b=dateTransform(b,storageMask,editMask)||""):b=yAnalise(`%${c}(${b})`)),j(e,b),"function"==typeof d.onNewItem&&d.onNewItem(a,e,f))}}m.dispatchEvent(window._evtFilled)}else Array.isArray(b)&&1<b.length&&_dump("There are more than one record returning from the server")}else if("DIV"==m.nodeName){if(n){const b=yDom._elem_templates[a]||{};"undefined"==typeof d.columns||"undefined"==typeof d.rows||"undefined"==typeof d.html?b.html=m.innerHTML:(b.columns=d.columns,b.rows=d.rows,b.html=d.html),yDom._elem_templates[a]=b}mergeObject(yDom._elem_templates[a],d,!0),e.deleteRows&&(m.innerHTML="");let c=m.innerHTML;if(b){for(const e of b){const b=s(e);if(t(m,b),"function"==typeof d.onBeforeNewItem&&d.onBeforeNewItem(a,b),d.html)c+=yAnalise(d.html,b);else for(const a in b)b.hasOwnProperty(a)&&(c+=`<div><div class=tnFieldName><b><small>${a}</small></b></div>${b[a]||""}</div>`)}m.innerHTML=c,m.dispatchEvent(window._evtFilled)}}}else;}static getElementsByAttribute(a,b,c,d){for(var e,f,g=a.getElementsByTagName(b),h=[],j="undefined"==typeof d?null:new RegExp("(^|\\s)"+d+"(\\s|$)","i"),k=0;k<g.length;k++)e=g[k],f=e.getAttribute&&e.getAttribute(c),"string"==typeof f&&0<f.length&&("undefined"==typeof d||j&&j.test(f))&&h.push(e);return h}static getStyleRuleValue(a,b){a=a||"";for(var c=0;c<document.styleSheets.length;c++)for(var d=document.styleSheets[c],e=d.cssRules?d.cssRules:d.rules,f=0;f<e.length;f++)if(e[f].selectorText&&e[f].selectorText.toLowerCase()===a)return"string"==typeof b?e[f].style[b]:e[f].style}static setStyleRuleValue(a,b,c){a=a||"";for(var d=0;d<document.styleSheets.length;d++)for(var e=document.styleSheets[d],f=e.cssRules?e.cssRules:e.rules,g=0;g<f.length;g++)f[g].selectorText&&f[g].selectorText.toLowerCase()===a&&("string"==typeof b?f[g].style[b]=c:f[g].style=c)}static createStyleRule(a,b){var c=document.createElement("style");for(var d in c.type="text/css",aux=".{0} {".format(a),b)b.hasOwnProperty(d)&&(aux+="\n\t{0}: {1};".format(d,b[d]));aux+="}\n",c.innerHTML=aux,document.getElementsByTagName("head")[0].appendChild(c)}static extractStyleRule(a){var b={},c=getStyleRuleValue(a);for(var d in c)c.hasOwnProperty(d)&&""<c[d]&&(isNumber(d)||(b[d]=c[d]));return b}static getClientSize(){var a=Math.max,b=document&&document.documentElement?document.documentElement:{clientWidth:800,clientHeight:600},c=window?window:{innerWidth:800,innerHeight:600},d=a(b.clientWidth,c.innerWidth||0),e=a(b.clientHeight,c.innerHeight||0);return[d,e]}static resizeIframe(obj,objMargin){var _Mathmax2=Math.max;objMargin=objMargin||{},objMargin.width=objMargin.width||0,objMargin.height=objMargin.height||0;var s1,s2,bestSize,onResize;s1=screen.height,s2=(obj.contentWindow||obj.contentDocument||obj).document.body.scrollHeight+40-objMargin.height,bestSize=_Mathmax2(s1,s2),obj.style.height=bestSize+"px",s1=screen.width,s2=(obj.contentWindow||obj.contentDocument||obj).document.body.scrollWidth+40-objMargin.width,bestSize=_Mathmax2(s1,s2),obj.style.width=bestSize+"px",onResize=obj.getAttribute("onResize"),onResize&&eval(onResize)}static addEvent(a,b,c){if("string"==typeof a&&(a=y$(a)),null!==a&&"undefined"!=typeof a){var d;if("SELECT"!=a.nodeName&&(Array.isArray(a)||"object"==typeof a&&"number"==typeof a.length))for(d=0;d<a.length;d++)yDom.addEvent(a[d],b,c);else{var e,f=b.split(" ");for(d=0;d<f.length;d++)e=f[d],a.addEventListener?a.addEventListener(e,c,"change"==e.toUpperCase()):a.attachEvent?a.attachEvent("on"+e,c):a["on"+e]=c}}}static removeEvent(a,b,c){if("string"==typeof a&&(a=y$(a)),null!==a&&"undefined"!=typeof a){var d;if(Array.isArray(a))for(d=0;d<a.length;d++)yDom.removeEvent(a[d],c);else{var e,f=b.split(" ");for(d=0;d<f.length;d++)e=f[d],a.addEventListener?a.removeEventListener(e,c,!1):a.detachEvent?a.detachEvent("on"+e,c):a["on"+e]=null}}}}