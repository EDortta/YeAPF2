/**
 * @name YeAPF2
 * @version 2.0
 * @description Yet Another PHP Framework v2
 * @license MIT License
 *
 * (c) 2004-2023 Esteban D.Dortta <dortta@yahoo.com>
 * Website: https://www.yeapf.com
 *
 */function yAnalise(aLine,aStack,aObject){"use strict";var _Mathmax=Math.max;if(aLine!==void 0){"string"==typeof aLine&&(aLine=yMisc.unmaskHTML(aLine)),aObject=window&&!0===window.allowInsecureJSCalls?aObject||window:aObject||{};for(var p,p1,p2,c1,c2,p3,yPattern=/\%(|\w+)\(/gi,yFunctions=",int,integer,intz,intn,decimal,ibdate,tsdate,tstime,tsdatetime,date,time,lat2deg,lon2deg,words,image,nl2br,quoted,singleQuoted,condLabel,checked,rg,cpf,cnpj,phone,cep,brDocto,bool2str,str2bool,",aValue="";"string"==typeof aLine&&0<=(p=aLine.search(yPattern))&&(p1=aLine.slice(p).search(/\(/),0<=p1);){if(c1=aLine.slice(p+p1+1,p+p1+2),"\""===c1||"'"===c1){p3=p+p1+1;do++p3,c2=aLine.slice(p3,p3+1);while(c2!==c1&&p3<aLine.length);p2=p3+aLine.slice(p3).search(/\)/)-p}else p2=aLine.slice(p).search(/\)/);var funcName=aLine.slice(p+1,p+p1),funcParams=aLine.slice(p+p1+1,p+p2),parametros=funcParams,n=null;for(funcParams=funcParams.split(","),n=0;n<funcParams.length;n++)funcParams[n]=(funcParams[n]||"").trim(),funcParams[n]=yAnalise(funcParams[n],aStack,aObject);aValue=void 0;var fParamU=funcParams[0].toUpperCase(),fParamN=funcParams[0];if(void 0===aStack)aValue=""==fParamN?"":"."!=fParamN.substr(0,1)&&"string"==eval("typeof "+fParamN)?eval(fParamN):yAnalise(fParamN,null,aObject);else if(null==aStack[0])aValue=aStack[fParamU]?yAnalise(aStack[fParamU],aStack,aObject):yAnalise(aStack[fParamN],aStack,aObject);else for(var sNdx=aStack.length-1;0<=sNdx&&null==aValue;sNdx--)null==aStack[sNdx][fParamU]?null!=aStack[sNdx][fParamN]&&(aValue=yAnalise(aStack[sNdx][fParamN],aStack,aObject)):aValue=yAnalise(aStack[sNdx][fParamU],aStack,aObject);switch(null==aValue&&(aValue=""),funcParams[0]=aValue,funcName){case"integer":case"int":case"intz":case"intn":aValue=str2int(aValue),0==aValue&&("intz"==funcName?aValue="-":"intn"==funcName&&(aValue=""));break;case"decimal":var aDecimals=_Mathmax(0,parseInt(funcParams[1]));aValue=str2double(aValue),aValue=aValue.toFixed(aDecimals);break;case"phone":aValue=(aValue||"").asPhone();break;case"bool2str":aValue=bool2str(aValue,!1);break;case"str2bool":aValue=str2bool(""+aValue,!1);break;case"lon2deg":aValue=dec2deg(aValue,!1);break;case"lat2deg":aValue=dec2deg(aValue,!0);break;case"deg2dec":aValue=deg2dec(aValue,!1);break;case"ibdate":aValue=IBDate2Date(aValue);break;case"tsdate":aValue=timestamp2date(aValue);break;case"tstime":aValue=timestamp2time(aValue);break;case"tsdatetime":aValue=timestamp2date(aValue)+" "+timestamp2time(aValue);break;case"date":aValue=funcParams[1]?UDate2Date(aValue,funcParams[1]):UDate2Date(aValue);break;case"time":aValue=funcParams[1]?UDate2Time(aValue,funcParams[1]):UDate2Time(aValue);break;case"rg":aValue=(""+(aValue||"")).asRG();break;case"cpf":aValue=(""+(aValue||"")).asCPF();break;case"cnpj":aValue=(""+(aValue||"")).asCNPJ();break;case"brDocto":var aux=""+(aValue||"");aValue=aux.isCNPJ()?aux.asCNPJ():aux.isCPF()?aux.asCPF():aux.asRG();break;case"phone":aValue=(""+(aValue||"")).asPhone(funcParams[1]);break;case"cep":aValue=(""+(aValue||"")).asCEP();break;case"nl2br":aValue=aValue.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2");break;case"abbreviate":aValue=aValue.abbreviate(funcParams[1]||20,funcParams[2]||!1);break;case"words":var auxValue=aValue.split(" "),aStart=_Mathmax(0,str2int(funcParams[1])),aCount=_Mathmax(auxValue.length-1,str2int(funcParams[2])),aWrap=_Mathmax(0,str2int(funcParams[3]));for(aValue="",n=aStart;n<aStart+aCount;n++){var tmpValue=onlyDefinedValue(auxValue[n]);""<tmpValue&&(aValue+=" "+tmpValue)}0<aWrap&&(aValue=wordwrap(aValue,aWrap,"<br>",!0));break;case"quoted":aValue=("\""+aValue).trim()+"\"";break;case"singleQuoted":aValue=("'"+aValue).trim()+"'";break;case"condLabel":break;case"checked":aValue=countCheckedElements(aValue);break;default:""<funcName&&("function"==typeof aObject[funcName]?aValue=aObject[funcName].apply(null,funcParams):"object"==typeof aObject[funcName]?"function"==typeof aObject[funcName][aValue]?aValue=aObject[funcName][aValue].apply(null,funcParams):aValue=aObject[funcName]:"undefined"!=typeof aObject[funcName]&&(aValue=aObject[funcName]))}aLine=aLine.slice(0,p)+aValue+aLine.slice(p+p2+1)}}else aLine="";return aLine}var yLexObj=function(a,b){"use strict";var d={};return d._debug=!0===(b||!1),d.optable={"!":"EXCLAMATION","#":"NUMBER_SIGN",$:"DOLLAR","%":"MODULUS","^":"POWER","&":"AMPERSAND","(":"L_PAREN",")":"R_PAREN","*":"MULTIPLICATION","+":"ADDITION",",":"COMMA","-":"SUBSTRACTION",".":"PERIOD","/":"DIVISION",":":"COLON",";":"SEMICOLON","<":"LESS_THAN","=":"EQUALS",">":"GREATER_THAN","?":"QUESTION","[":"L_BRACKET","\\":"BACKSLASH","]":"R_BRACKET","{":"L_BRACE","|":"PIPE","}":"R_BRACE","~":"TILDE","++":"INCREMENT","--":"DECREMENT","==":"EQUAL2","!=":"NOT_EQUAL2",">=":"GREATER_EQUALS2","<=":"LESS_EQUALS2"},d.opprecedence={LIKE:6,"<":6,">":6,"<=":6,">=":6,"==":6,"^":4,"/":4,"*":4,AND:4,OR:3,"+":2,"-":2,"(":1},d._ALPHA=1,d._ALPHA_NUM=2,d._NEW_LINE=4,d._DIGIT=8,d._QUOTE=16,d.voidToken={type:null,token:null,token_string:null,pos:null},d.error=function(){var a={};return mergeObject(d.voidToken,a),a.type="ERROR",a.pos=d.pos,a},d.oneChar=function(a){return a=a||0,d.buf.charAt(d.pos+a)},d._isnewline=function(a){return a=d.oneChar(),"\r"===a||"\n"===a?d._NEW_LINE:0},d._isdigit=function(a){return"0"<=a&&"9">=a?d._DIGIT:0},d._isalpha=function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a?d._ALPHA:0},d._isalphanum=function(a){return d._isdigit(a)|d._isalpha(a)},d._isquote=function(a){return"'"==a||"\""==a?d._QUOTE:0},d._whatis=function(a){return d._isalpha(a)|d._isdigit(a)|d._isquote(a)},d._process_quote=function(){var a=d.oneChar(),b=d.buf.indexOf(a,d.pos+1),c=d.error();return b>d.pos&&(c={type:"LITERAL",token:d.buf.substring(d.pos+1,b),pos:d.pos},c.token_string=c.token,d.pos=b+1),c},d._process_identifier=function(){for(var a=1,b=d.error();d.pos+a<d.buf.length&&d._isalpha(d.oneChar(a));)a++;return b={type:"IDENTIFIER",token:d.buf.substring(d.pos,d.pos+a),pos:d.pos},b.token_string=b.token,d.pos+=a,b},d._process_number=function(){for(var a=1,b=d.error();d.pos+a<d.buf.length&&d._isdigit(d.oneChar(a));)a++;return b={type:"NUMBER",token:d.buf.substring(d.pos,d.pos+a),pos:d.pos},b.token_string=b.token,d.pos+=a,b},d.getToken=function(){for(var a,b=d.error();d.pos<d.buf.length&&(a=d.oneChar(),-1<" \t\r\n".indexOf(a));)d.pos++;if(d.pos<d.buf.length){"/"!=a||"*"!=d.oneChar(1)&&"/"!=d.oneChar(1);var e=d.optable[a];if(void 0===e)switch(d._whatis(a)){case d._ALPHA:b=d._process_identifier();var f=(b.token_string+"").toUpperCase();("AND"==f||"OR"==f||"LIKE"==f)&&(b.token_string=f,b.type="OPERATOR");break;case d._DIGIT:b=d._process_number();break;case d._QUOTE:b=d._process_quote()}else{var g=a,h=d.oneChar(1),i=d.voidToken,j=d.pos;if(d.optable[a+h])a+=h,e=d.optable[a],g=a;else if(0<="-+".indexOf(a)){var k=d.priorToken.type;if(null===k||"OPERATOR"==k&&"L_PAREN"==d.priorToken.token){var l=d._whatis(h);l==d._DIGIT?i=d._process_number():l==d._ALPHA&&(i=d._process_identifier())}}b={type:i.type||"OPERATOR",token:i.token||e,pos:j,token_string:i.token_string||g},d.pos+=a.length}}else b.type="EOF",b.token=null;return d.priorToken=b,b},d.tokenTypeIs=function(a,b){return b=","+b+",",0<=b.indexOf(","+a.type+",")},d.getExpectedToken=function(a){var b=d.pos,c=d.getToken();return d.tokenTypeIs(c,a)?c:(d.pos=b,!1)},d._analiseText=function(){var a,b,c,e,f=d.voidToken;do if(e=!1,a=d.getToken(),a&&"EOF"!=a.type)if(0<d.symStack.length&&(f=d.symStack[d.symStack.length-1]),f=f||d.voidToken,"("==a.token_string)d.symStack.push(a);else if(")"==a.token_string)for(f=d.symStack.pop();f&&"("!=f.token_string;)d.postFixStack.push(f),f=d.symStack.pop();else if("OPERATOR"==a.type){for(var g=!0;g;)g=!1,0<d.symStack.length&&(f=d.symStack[d.symStack.length-1],f=f||d.voidToken,b=d.opprecedence[a.token_string]||99,c=d.opprecedence[f.token_string]||10,c>b&&(g=!0,f=d.symStack.pop(),d.postFixStack.push(f)));d.symStack.push(a)}else d.postFixStack.push(a);while("ERROR"!=a.type&&"EOF"!=a.type);do f=d.symStack.pop(),f&&"EOF"!=f.type&&d.postFixStack.push(f);while(f&&"EOF"!=f.type);d._debug&&(_dumpy(32,2,"postFixStack:"),d.showStack(d.postFixStack),_dumpy(32,2,"symStack:"),d.showStack(d.symStack))},d.solve=function(a){var c,e,f,g,h,j,k,b=Math.pow,l=[],m="";for(a=a||{},a["true"]=!0,a["false"]=!1,c=0;c<d.postFixStack.length&&!0;c++)if(g=!1,e=d.postFixStack[c],e)if(("NUMBER"==e.type||"LITERAL"==e.type)&&(f=e.token_string,!isNumber(f)&&(f=(f+"").toUpperCase()),g=!0),"IDENTIFIER"==e.type&&(f=a[e.token_string],"undefined"==typeof f?(m="'"+e.token_string+"' is not defined on data",_dumpy(32,1,m),f=!1,g=!0):("string"==typeof f&&(f=(f+"").toUpperCase()),g=!0)),g)l.push(f);else{switch(j=l.pop(),h=l.pop(),k=null,(""+e.token_string).toUpperCase()){case"+":k=str2double(h)+str2double(j);break;case"-":k=str2double(h)-str2double(j);break;case"*":k=str2double(h)*str2double(j);break;case"/":k=str2double(h)/str2double(j);break;case"^":k=b(str2double(h),str2double(j));break;case">":k=h>j;break;case"<":k=h<j;break;case">=":k=h>=j;break;case"<=":k=h<=j;break;case"<>":case"!=":k=h!=j;break;case"==":k=h==j;break;case"AND":case"&&":k=h&&j;break;case"OR":case"||":k=h||j;break;case"LIKE":h=(h+"").toUpperCase(),j=(j+"").toUpperCase();var n=j.replace(/\%/g,"");k="%"==j.substr(0,1)?"%"==j.substr(j.length-1,1)?0<=h.indexOf(n):h.substr(h.length-n.length)==n:"%"==j.substr(j.length-1)?h.substr(0,n.length)==n:h==j;break;default:throw m="'"+e.token_string+"' is not a recognized operator",new Error}d._debug&&_dumpy(32,2,"{0} = {1} {2} {3}".format(k,h,e.token_string,j)),null!==k&&l.push(k)}return k=l.pop(),d._debug&&_dumpy(32,2,JSON.stringify(k)),k},d.showStack=function(a){for(var b="\t",c=0;c<a.length;c++)b+=a[c].token_string+" ";_dumpy(32,2,b)},d.parse=function(){return d.reset(),d._analiseText(),d.stack},d.reset=function(){return d.pos=0,d.symStack=[],d.postFixStack=[],d.priorToken=d.voidToken,d},d.init=function(a){return d.buf=a||d.buf||"",d.parse(),d},d.init(a)};